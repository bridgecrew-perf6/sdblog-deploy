<!DOCTYPE html>
<html>

<head>
    <!-- Meta tags -->
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8">
    <meta name="HandheldFriendly" content="true" />
    <!-- SEO -->
    <title>Rickrolling People in Google Meets(and more web apps)</title>
    <meta name="title" content="Rickrolling People in Google Meets(and more web apps)">
    <meta name="description" content="Rick rolling invades google meets">
    <meta name="author" content="semidev">
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:title" content="Rickrolling People in Google Meets(and more web apps)">
    <meta property="og:description" content="Rick rolling invades google meets">
    <meta property="og:image" content="">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="">
    <meta property="twitter:title" content="Rickrolling People in Google Meets(and more web apps)">
    <meta property="twitter:description" content="Rick rolling invades google meets">
    <meta property="twitter:image" content="">
    <!-- Require external JS files -->
    <script src="/js/halfmoon.js"></script>
    <script src="/js/main.js"></script>
    <script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <link rel="manifest" href="/manifest.json" />
    <!-- Require external CSS files -->
    <link rel="stylesheet" href="/css/halfmoon.css" />
	
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
    <!-- Icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
</head>

<body>
    <!-- Page wrapper -->
    <div class="page-wrapper">
        <!-- Content wrapper with static navbars -->
        <div class="content-wrapper">
            <!-- Static navbar -->
            <nav class="navbar">
                <!-- Navbar content with toggle sidebar button -->
                <div class="navbar-content">

                </div>
                <!-- Icon/brand -->
                <a href="/" class="navbar-brand">
                    <img src="https://cdn.glitch.com/f648f832-1dab-41a0-a2ec-8e3be00e552b%2F1F680_color.png?v=1602371731988" alt="..." />Blog of Semidev
                </a>
                <!-- Navbar buttons -->
                <ul class="navbar-nav d-none d-md-flex">
                    <li class="nav-item">
                        <a href="/" class="nav-link">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="/posts" class="nav-link">Blog</a>
                    </li>
                    <li class="nav-item">
                        <a href="/contact" class="nav-link">Contact</a>
                    </li>
                    <li class="nav-item">
                        <a href="/feed/feed.xml" class="nav-link">RSS</a>
                    </li>
					<li class="nav-item">
                        <a href="https://www.youtube.com/channel/UCHBxr3a0Ny0HiuMycoUMOeg" class="nav-link">YouTube</a>
                    </li>
                </ul>
                <!-- Darkmode toggle -->
                <div class="navbar-content ml-auto">
                    <!-- ml-auto = margin-left: auto -->
                    <button class="btn btn-primary" type="button" onclick="halfmoon.toggleDarkMode();">ðŸŒ™</button>
                </div>
            </nav>
            <!-- Content -->
            <div class="container-fluid">
			<a id="top"></a>
                <div id="post" style="margin-left:20px;margin-right:20px;word-wrap:break-word;">
<h1>Rickrolling People in Google Meets(and more web apps)</h1>

<p>This userscript I developed allows people to rickroll through any web application using a mic. It can also be run in the console(not tested yet), afterwards. To turn it off, disable the userscript if you're using it and refresh the page.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// ==UserScript==</span><br><span class="token comment">// @name         let's roll</span><br><span class="token comment">// @namespace    http://tampermonkey.net/</span><br><span class="token comment">// @version      1.1</span><br><span class="token comment">// @description  try to take over the world!</span><br><span class="token comment">// @author       github:javaarchive</span><br><span class="token comment">// @match        https://meet.google.com/*</span><br><span class="token comment">// @match        https://discord.com/channels/*</span><br><span class="token comment">// @grant        none</span><br><br><span class="token comment">// ==/UserScript==</span><br><span class="token comment">// also created by SemiDev on YT(https://www.youtube.com/channel/UCHBxr3a0Ny0HiuMycoUMOeg)</span><br><span class="token comment">// discord: smashmaster#0045</span><br><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token string">'use strict'</span><span class="token punctuation">;</span><span class="token comment">// @run-at        document-start</span><br>    window<span class="token punctuation">.</span>allMS <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">function</span> <span class="token function">waitForPlayer</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>readyState <span class="token operator">></span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>                <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token keyword">return</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"canplay"</span><span class="token punctuation">,</span><span class="token parameter">e</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token comment">// Set audio only</span><br>    <span class="token keyword">const</span> audioOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> currentStreamAsyncFunc <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>   <span class="token keyword">var</span> cacheVideo<span class="token punctuation">,</span> cacheAudio<span class="token punctuation">,</span> firstTime <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getBothStreams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>        <span class="token keyword">let</span> out <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token keyword">let</span> audio<span class="token punctuation">,</span>video<span class="token punctuation">;</span><br>        <span class="token keyword">let</span> doSync <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">!</span>cacheVideo<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>cacheAudio<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        firstTime <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>cacheAudio<span class="token punctuation">)</span><span class="token punctuation">{</span><br><br>            <span class="token comment">//var audio = new Audio('https://cors-anywhere.herokuapp.com/https://ia800605.us.archive.org/8/items/NeverGonnaGiveYouUp/jocofullinterview41.mp3');</span><br>            <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://cors-anywhere.herokuapp.com/https://ia800605.us.archive.org/8/items/NeverGonnaGiveYouUp/jocofullinterview41.mp3'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>cache<span class="token operator">:</span> <span class="token string">"force-cache"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Audio Downloaded"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">let</span> blob <span class="token operator">=</span> <span class="token keyword">await</span> data<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Audio Blob Generated"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">let</span> blobURL <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>blobURL<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            audio <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Audio</span><span class="token punctuation">(</span>blobURL<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            audio<span class="token punctuation">.</span>loop <span class="token operator">=</span> <span class="token boolean">true</span><br>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>doSync <span class="token operator">||</span> audioOnly<span class="token punctuation">)</span><span class="token punctuation">{</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Audio Only Starting"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token keyword">await</span> audio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Play Function Called"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token keyword">await</span> <span class="token function">waitForPlayer</span><span class="token punctuation">(</span>audio<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"File completled loaded into player"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token keyword">let</span> cStream <span class="token operator">=</span> audio<span class="token punctuation">.</span><span class="token function">captureStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Stream Captured"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cStream<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                out<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> cStream<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><br>            out<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> cacheAudio<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>cacheVideo <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>audioOnly<span class="token punctuation">)</span><span class="token punctuation">{</span><br>            <span class="token comment">//var audio = new Audio('https://cors-anywhere.herokuapp.com/https://ia800605.us.archive.org/8/items/NeverGonnaGiveYouUp/jocofullinterview41.mp3');</span><br>            <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://cors-anywhere.herokuapp.com/https://ia800803.us.archive.org/29/items/MacArthur_Foundation_100andChange_dQw4w9WgXcQ/Rick_Astley_-_Never_Gonna_Give_You_Up_dQw4w9WgXcQ.webm'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>cache<span class="token operator">:</span> <span class="token string">"force-cache"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">let</span> blob <span class="token operator">=</span> <span class="token keyword">await</span> data<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">let</span> blobURL2 <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>blobURL2<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            video <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"video"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            video<span class="token punctuation">.</span>src <span class="token operator">=</span> blobURL2<span class="token punctuation">;</span><br>            video<span class="token punctuation">.</span>loop <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>            <span class="token comment">//audio.srcObject = blob;</span><br>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>doSync<span class="token punctuation">)</span><span class="token punctuation">{</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Video Only"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token keyword">await</span> video<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Play Function Called on Video"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token keyword">await</span> <span class="token function">waitForPlayer</span><span class="token punctuation">(</span>video<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Video fully loaded into player"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token keyword">let</span> cStream <span class="token operator">=</span> video<span class="token punctuation">.</span><span class="token function">captureStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cStream<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                out<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> cStream<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Loading Both Files in Sync"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>video<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>audio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Play Request Success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">waitForPlayer</span><span class="token punctuation">(</span>video<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">waitForPlayer</span><span class="token punctuation">(</span>audio<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Files loaded"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                out<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> video<span class="token punctuation">.</span><span class="token function">captureStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                out<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> audio<span class="token punctuation">.</span><span class="token function">captureStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Capturing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><br>            out<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> cacheVideo<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Cache"</span><span class="token punctuation">,</span>cacheVideo<span class="token punctuation">,</span>cacheAudio<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        cacheVideo <span class="token operator">=</span> out<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><br>        cacheAudio <span class="token operator">=</span> out<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span> out<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token comment">// Debug stuff</span><br>    window<span class="token punctuation">.</span>debug <span class="token operator">=</span> <span class="token punctuation">[</span>cacheVideo<span class="token punctuation">,</span> cacheAudio<span class="token punctuation">,</span> currentStreamAsyncFunc<span class="token punctuation">]</span><span class="token punctuation">;</span><br>    window<span class="token punctuation">.</span>cacheVideo <span class="token operator">=</span> cacheVideo<span class="token punctuation">;</span><br>    window<span class="token punctuation">.</span>cacheAudio <span class="token operator">=</span> cacheAudio<span class="token punctuation">;</span><br>    window<span class="token punctuation">.</span><span class="token function-variable function">getDebug</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">[</span>cacheVideo<span class="token punctuation">,</span> cacheAudio<span class="token punctuation">,</span> currentStreamAsyncFunc<span class="token punctuation">,</span> getBothStreams<span class="token punctuation">,</span> firstTime<span class="token punctuation">]</span><br>    <span class="token punctuation">}</span><br>    window<span class="token punctuation">.</span>currentStreamAsyncFunc <span class="token operator">=</span> currentStreamAsyncFunc<span class="token punctuation">;</span><br>    <span class="token comment">/* let old = window.MediaRecorder;<br>    class HackedMediaRecorder{<br>        ondataavalible(chunk){<br>            // for user to override<br>        }<br>        constructor(stream, opts){<br>            this.stream = stream;<br>            this.state = "inactive";<br>            this.opts = opts;<br>            console.log("Chosen opts",opts);<br>        }<br>        start(){<br><br>            this.state = "recording";<br>        }<br>    }<br>    console.log("Patched Media Recorder");<br>    window.MediaRecorder = HackedMediaRecorder;*/</span> <span class="token comment">// patch</span><br>    <span class="token comment">/*class HackedMediaStream extends window.MediaStream{<br>        constructor(oldStream){<br>            super(oldStream); // Init old stuff<br>            window.allMS.push(this);<br>        }<br>        getMediaStream<br>    }*/</span><br>    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">modif_getUserMedia</span> <span class="token punctuation">(</span> <span class="token parameter">constraints</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>constraints <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>constraints<span class="token punctuation">.</span>video <span class="token operator">&amp;&amp;</span> constraints<span class="token punctuation">.</span>audio <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"sent hacked media stream"</span><span class="token punctuation">,</span>constraints<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token comment">//console.log("sent hacked media stream",constraints);</span><br>            <span class="token keyword">let</span> gbs<span class="token punctuation">;</span><br>            <span class="token keyword">if</span><span class="token punctuation">(</span>currentStreamAsyncFunc<span class="token punctuation">)</span><span class="token punctuation">{</span><br>                gbs <span class="token operator">=</span> currentStreamAsyncFunc<span class="token punctuation">;</span><br>               <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><br>                   gbs <span class="token operator">=</span> <span class="token function">getBothStreams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                   currentStreamAsyncFunc <span class="token operator">=</span> gbs<span class="token punctuation">;</span><br>               <span class="token punctuation">}</span><br>            <span class="token comment">//return new HackedMediaStream(await navigator.mediaDevices.old_getUserMedia(constraints))</span><br>            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">await</span> gbs<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>constraints <span class="token operator">&amp;&amp;</span> constraints<span class="token punctuation">.</span>video <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>constraints<span class="token punctuation">.</span>audio <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>audioOnly<span class="token punctuation">)</span><span class="token punctuation">{</span><br>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"sent hacked video media stream"</span><span class="token punctuation">,</span>constraints<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">let</span> gbs<span class="token punctuation">;</span><br>            <span class="token keyword">if</span><span class="token punctuation">(</span>currentStreamAsyncFunc<span class="token punctuation">)</span><span class="token punctuation">{</span><br>                gbs <span class="token operator">=</span> currentStreamAsyncFunc<span class="token punctuation">;</span><br>               <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><br>                   gbs <span class="token operator">=</span> <span class="token function">getBothStreams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                   currentStreamAsyncFunc <span class="token operator">=</span> gbs<span class="token punctuation">;</span><br>               <span class="token punctuation">}</span><br>            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">await</span> gbs<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span><br>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"skipped constriants"</span><span class="token punctuation">,</span>constraints<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">return</span> navigator<span class="token punctuation">.</span>mediaDevices<span class="token punctuation">.</span><span class="token function">old_getUserMedia</span><span class="token punctuation">(</span>constraints<span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Injected getUserMedia"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// Credits to mcreator studio for most of injection code</span><br>    <span class="token class-name">MediaDevices</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>old_getUserMedia <span class="token operator">=</span> <span class="token class-name">MediaDevices</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>getUserMedia<br>    navigator<span class="token punctuation">.</span>getUserMedia <span class="token operator">=</span> modif_getUserMedia<span class="token punctuation">;</span><br>    <span class="token class-name">MediaDevices</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>getUserMedia <span class="token operator">=</span> modif_getUserMedia<span class="token punctuation">;</span><br><br>    <span class="token comment">// Your code here...</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>I will eventually change this to stream a rickroll video but for now this just changes your audio to Never Gonna Give you up. Make sure to check this blog in a few days as I will post another userscript allowing you to change your camera to use a screenshare instead of your actual camera so you can put whatever content you please as your camera feed.</p>

</div>
<hr>
<ul><li>Post after this: <a href="/posts/2020-11-11-screenshare-as-camera/">Camera to Screenshare Mapper</a></li><li>Post before this: <a href="/posts/2020-10-21-walking-journey/">The Long Journey</a></li>
  <li><a href="#top">Back to the top</a></li>
</ul>
            </div>

            <!-- Static bottom navbar -->
            <nav class="navbar navbar-static-bottom">
                <!-- Navbar text -->
                <span class="navbar-text">
                        &copy; <div id="year">2020</div>, semidev. All rights reserved.
                    </span>
            </nav>
        </div>
    </div>
</body>
<footer>
    <script src="/js/script.js"></script>
    <script type="text/javascript">
  if (halfmoon.getPreferredMode() == "light-mode") {
    // Light mode is preferred
  }
  else if (halfmoon.getPreferredMode() == "dark-mode") {
    halfmoon.toggleDarkMode();
  }
  else if (halfmoon.getPreferredMode() == "not-set" && true) {
    halfmoon.toggleDarkMode();
  }
    </script>
</footer>

</html>
